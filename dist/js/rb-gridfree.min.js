var RBGridFree=function(){function t(e){this.$container=e,e.attr("data-gridfree-instance",t.instanceCount)
var i=function(){var i=document.createElement("style")
return i.appendChild(document.createTextNode("")),i.type="text/css",i.id="css-gridfree-"+t.instanceCount,$(i).insertAfter(e),i}()
this.css=i.sheet,t.instanceCount++}return t.prototype.initialize=function(){this.$container.is("tr")&&this.$container.closest("table").css("table-layout","fixed"),this.$blocks=this.$container.children("[data-gridfree-fix],[data-gridfree-rel]"),console.log("rb: initializing "+this.$blocks.length+" blocks")
for(var e=0,i=0,r=0;r<this.$blocks.length;r++)$(this.$blocks[r]).attr("data-gridfree-block",t.blockCount++)
return this.$blocks.filter(function(){return $(this).data("gridfree-fix")}).each(function(t,i){e+=$(i).data("gridfree-fix")}),this.fixedTotal=e,this.$blocks.filter(function(){return $(this).data("gridfree-rel")}).each(function(t,e){i+=$(e).data("gridfree-rel")}),this.relativeTotal=i,console.log("rb: found "+e+" fix and "+i+" rel"),this.resize(),this},t.prototype.resize=function(){for(;this.css.cssRules.length;)this.css.deleteRule(0)
for(var t=(this.$container.width()-this.fixedTotal)/this.$container.width(),e=0;e<this.$blocks.length;e++){var i=this.$blocks[e],r=$(i).data("gridfree-rel"),n=r/this.relativeTotal*t*100,s=$(i).data("gridfree-fix"),a=$(i).css("marginLeft")||"0px",o="0px - 2 * "+a
n&&(o+=" + "+n+"%"),s&&(o+=" + "+s+"px")
var c=this.$container.data("gridfree-instance"),l=$(i).data("gridfree-block")
this.css.insertRule("[data-gridfree-instance = '"+c+"'] [data-gridfree-block = '"+l+"'] {\n\t\t\t\t\twidth: calc("+o+");\n\t\t\t\t}",0)}},t.instanceCount=0,t.blockCount=0,t}()
$(function(){$(".rb-gridfree").each(function(){var t=new RBGridFree($(this))
t.initialize(),$(window).on("resize",function(){t.resize()})})})
